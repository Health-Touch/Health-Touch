<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/baseDash.css">
    <link rel="stylesheet" href="css/analiseDetalhada.css">
    <title>Análise</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/funcoes.js"></script>
</head>

<body>

    <div class="divPai">
        <!-- inicio menu lateral -->
        <div class="divPaiLateral">
            <div class="filhoLateral">

                <div class="divNomeEmpresa">

                    <p id="nomeEmpresa">Bem Vindo <br> Nome da Empresa</p>
                </div>

                <div class="divMainMenu">
                    <p id="pMainMenu">MAIN MENU</p>
                </div>

                <div class="divPaiOpcoesMenu">
                    <div class="divHome">
                        <img id="iconMenuLateralHome" src="assets/img/iconHome.png">
                        <div class="divEspaco"></div>
                        <p id="pMenuLateral">Setores</p>
                    </div>

                    <div class="divEstatisticas">
                        <img id="iconEstatiscasLateral" src="assets/img/estatisticasIcon.png">
                        <div class="divEspaco"></div>
                        <p id="pMenuLateral">Estatísticas <br> Gerais</p>
                    </div>

                    <div class="divDashboards">
                        <img id="iconDashboardsLateral" src="assets/img/iconDashboard.png">
                        <div class="divEspaco"></div>
                        <p id="pMenuLateral">Dashboards <br> Detalhadas</p>
                    </div>

                    <div class="divComputador">
                        <img id="iconComputadorLateral" src="assets/img/iconComputador.png">
                        <div class="divEspaco"></div>
                        <p id="pMenuLateral">Análise <br> Máquinas</p>
                    </div>

                    <div class="divCadastroComputador">
                        <img id="iconComputadorCadLateral" src="assets/img/iconPcConfig.png">
                        <div class="divEspaco"></div>
                        <p id="pMenuLateral">Cadastro <br> Máquinas</p>
                    </div>

                    <div class="divAnaliseEquipe">
                        <img id="iconAnaliseEquipe" src="assets/img/iconEquipe.png">
                        <div class="divEspaco"></div>
                        <p id="pMenuLateral">Funcionários</p>
                    </div>

                    <div class="divCadastroEquipe">
                        <img id="iconCadastroEquipe" src="assets/img/IconEquipeConfig.png">
                        <div class="divEspaco"></div>
                        <p id="pMenuLateral">Cadastro <br> Funcionários</p>
                    </div>
                </div>

                <div class="divEspacoV2"></div>

                <div class="divHelp">
                    <p id="pHelp">HELP</p>
                </div>

                <div class="divPaiHelpMenu">
                    <div class="divHelpDesk">
                        <img id="iconHelpDesk" src="assets/img/iconHelp.png">
                        <div class="divEspaco"></div>
                        <p id="pMenuLateral">HelpDesk</p>
                    </div>

                    <div class="divConfiguracoes">
                        <img id="iconConfiguracoes" src="assets/img/iconConfig.png">
                        <div class="divEspaco"></div>
                        <p id="pMenuLateral">Configurações</p>
                    </div>

                    <img id="logoMenuLateral" src="assets/img/logoMenu.png">
                </div>

            </div>
        </div>
        <!-- fim do menu lateral -->

        <!-- inicio do cabeçalho -->
        <div class="divPaiCabecalho">
            <div class="filhoCabecalho">

                <div class="esquerdaCabecalho">
                    <input type="text" class="inputLogin" placeholder="Pesquisar"></input>
                    <img src="assets/img/lupa.png" class="lupaBusca">
                </div>

                <div class="direitaCabecalho">
                    <img class="emailIconCabecalho" src="assets/img/iconEmail.png">
                    <img class="sinoIconCabecalho" src="assets/img/notificacaoIcon.png">
                    <div class="divPerfilCabecalho">
                        <img class="iconPerfilCabecalho" src="assets/img/fotoPerfil.png">
                        <div class="textosIcon">
                            <p id="tituloPerfil">Anthony Bento</p>
                            <p id="cargoPerfil">CEO</p>
                        </div>
                        <img class="setaPerfilCabecalho" src="assets/img/setaIcon.png">
                    </div>
                </div>

            </div>
            <!-- fim do cabeçalho -->

            <!-- começo conteudo pagina -->
            <div class="divPaiConteudo">
                <div class="divFilhoAnalise">
                    <div class="divTituloAnalise">
                        <b>Análise Detalhada</b>
                    </div>
                    <div class="divSubtitulo">
                        <p><b>Computador 1</b> Pediatra setor1</p>
                        <button class="botaoTrocar">Trocar</button> <button class="botaoHist">Histórico</button>
                    </div>
                </div>
                <div class="divPaiUsb">
                    <div class="entradasUsb">
                        <p>Entradas USB</p>
                        <div class="DivCampos">
                            <div class="campo">
                                <p>Id</p>
                                <p>Nome</p>
                                <p>Status</p>
                                <p>Data & Hora</p>
                            </div>
                            <div id="dados">
                                <!-- <div class="Dados">
                                    <p>01</p>
                                    <p>Usb Biel</p>
                                    <p>Desconectado</p>
                                    <p>19/10/23 18h:45</p>
                                </div> -->
                                <!-- <div class="Dados">
                                    <p>02</p>
                                    <p>Usb Marry</p>
                                    <p>conectado</p>
                                    <p>20/10/23 18h:45</p>
                                </div> -->
                            </div>



                        </div>
                    </div>
                </div>
                <div class="divDashs">
                    <div class="dash">
                        <div class="grafico">
                            <canvas id="myChartDisco" class="grafico"></canvas>
                        </div>

                    </div>

                    <div class="dash">
                        <div class="grafico">
                            <canvas id="myChartCpu" class="grafico"></canvas>
                        </div>
                    </div>

                    <div class="dash">
                        <div class="grafico">
                            <canvas id="myChartRam" class="grafico"></canvas>
                        </div>
                    </div>


                </div>




            </div>
            <!-- fim conteudo pagina -->

        </div>
    </div>
</body>

</html>
<script>
    

    Chart.defaults.color = '#FFFF';

    //   Chart.defaults.backgroundColor = 'rgb(254, 91, 153)';
    window.onload = obterDadosGrafico();
    window.onload = obterDadosGraficoCpu();
    window.onload = obterDadosGraficoRam();
    window.onload = atualizarFeedUsb();

    function obterDadosGrafico(disco) {

        // if (proximaAtualizacao != undefined) {
        //     clearTimeout(proximaAtualizacao);
        // }

        fetch(`/medidas/ultimasDisco/${disco}`, { cache: 'no-store' }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    resposta.reverse();

                    plotarGrafico(resposta, disco);
                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    // Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico
    // Configura o gráfico (cores, tipo, etc), materializa-o na página e, 
    // A função *plotarGrafico* também invoca a função *atualizarGrafico*
    function plotarGrafico(resposta, disco) {

        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        // rgb(254, 91, 153)
        let labels = [];

        // Criando estrutura para plotar gráfico - dados
        let dados = {
            labels: labels,
            datasets: [{
                label: 'Uso de DISCO',
                data: [],
                fill: true,
                backgroundColor: `rgb(169,223,216)`,
                borderColor: `A9DFD8`,
                border: 1 + "px",
                tension: 0.1
            }]
        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];
            labels.push(registro.horario);
            dados.datasets[0].data.push(registro.porcentagem);
        }

        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log(labels)
        console.log('Dados:')
        console.log(dados.datasets)
        console.log('----------------------------------------------')

        // Criando estrutura para plotar gráfico - config
        const config = {
            type: 'line',
            data: dados,
        };

        // Adicionando gráfico criado em div na tela
        let myChart = new Chart(
            document.getElementById(`myChartDisco`),
            config
        );

        setTimeout(() => atualizarGrafico(disco, dados, myChart), 2000);
    }


    // Esta função *atualizarGrafico* atualiza o gráfico que foi renderizado na página,
    // buscando a última medida inserida em tabela contendo as capturas, 

    //     Se quiser alterar a busca, ajuste as regras de negócio em src/controllers
    //     Para ajustar o "select", ajuste o comando sql em src/models
    function atualizarGrafico(disco, dados, myChart) {



        fetch(`/medidas/tempo-realDisco/${disco}`, { cache: 'no-store' }).then(function (response) {
            if (response.ok) {
                response.json().then(function (novoRegistro) {

                    console.log(`Dados recebidos: ${JSON.stringify(novoRegistro)}`);
                    console.log(`Dados atuais do gráfico:`);
                    console.log(dados);

                    // let avisoCaptura = document.getElementById(`avisoCaptura${disco}`)
                    // avisoCaptura.innerHTML = ""


                    if (novoRegistro[0].momento_grafico == dados.labels[dados.labels.length]) {
                        console.log("---------------------------------------------------------------")
                        console.log("Como não há dados novos para captura, o gráfico não atualizará.")
                        // avisoCaptura.innerHTML = "<i class='fa-solid fa-triangle-exclamation'></i> Foi trazido o dado mais atual capturado pelo sensor. <br> Como não há dados novos a exibir, o gráfico não atualizará."
                        console.log("Horário do novo dado capturado:")
                        console.log(novoRegistro[0].porcentagem)
                        console.log("Horário do último dado capturado:")
                        console.log(dados.labels[dados.labels.length])
                        console.log("---------------------------------------------------------------")
                    } else {
                        // tirando e colocando valores no gráfico
                        dados.labels.shift(); // apagar o primeiro
                        dados.labels.push(novoRegistro[0].horario); // incluir um novo momento

                        dados.datasets[0].data.shift();  // apagar o primeiro de umidade
                        dados.datasets[0].data.push(novoRegistro[0].porcentagem); // incluir uma nova medida de umidade

                        // dados.datasets[1].data.shift();  // apagar o primeiro de temperatura
                        // dados.datasets[1].data.push(novoRegistro[0].temperatura); // incluir uma nova medida de temperatura

                        myChart.update();
                    }

                    // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
                    // proximaAtualizacao = setTimeout(() => atualizarGrafico(disco, dados, myChart), 2000);
                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
                // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
                // proximaAtualizacao = setTimeout(() => atualizarGrafico(disco, dados, myChart), 2000);
            }
        })
            .catch(function
                (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });

    }


    // cpu
    function obterDadosGraficoCpu(cpu) {

        // if (proximaAtualizacao != undefined) {
        //     clearTimeout(proximaAtualizacao);
        // }

        fetch(`/medidas/ultimasCpu/${cpu}`, { cache: 'no-store' }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    resposta.reverse();

                    plotarGraficoCpu(resposta, cpu);
                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    // Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico
    // Configura o gráfico (cores, tipo, etc), materializa-o na página e, 
    // A função *plotarGrafico* também invoca a função *atualizarGrafico*
    function plotarGraficoCpu(resposta, cpu) {

        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        let labels = [];

        // Criando estrutura para plotar gráfico - dados
        let dados = {
            labels: labels,
            datasets: [{
                label: 'Uso de CPU',
                data: [],
                fill: false,
                backgroundColor: ' rgb(254, 91, 153)',
                tension: 0.1
            }]
        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];
            labels.push(registro.horario);
            dados.datasets[0].data.push(registro.porcentagem);
        }

        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log(labels)
        console.log('Dados:')
        console.log(dados.datasets)
        console.log('----------------------------------------------')

        // Criando estrutura para plotar gráfico - config
        const config = {
            type: 'line',
            data: dados,
        };

        // Adicionando gráfico criado em div na tela
        let myChart2 = new Chart(
            document.getElementById(`myChartCpu`),
            config
        );

        setTimeout(() => atualizarGraficoCpu(cpu, dados, myChart2), 2000);
    }


    // Esta função *atualizarGrafico* atualiza o gráfico que foi renderizado na página,
    // buscando a última medida inserida em tabela contendo as capturas, 

    //     Se quiser alterar a busca, ajuste as regras de negócio em src/controllers
    //     Para ajustar o "select", ajuste o comando sql em src/models
    function atualizarGraficoCpu(cpu, dados, myChart2) {



        fetch(`/medidas/tempo-realCpu/${cpu}`, { cache: 'no-store' }).then(function (response) {
            if (response.ok) {
                response.json().then(function (novoRegistro) {

                    console.log(`Dados recebidos: ${JSON.stringify(novoRegistro)}`);
                    console.log(`Dados atuais do gráfico:`);
                    console.log(dados);

                    // let avisoCaptura = document.getElementById(`avisoCaptura${disco}`)
                    // avisoCaptura.innerHTML = ""


                    if (novoRegistro[0].momento_grafico == dados.labels[dados.labels.length]) {
                        console.log("---------------------------------------------------------------")
                        console.log("Como não há dados novos para captura, o gráfico não atualizará.")
                        // avisoCaptura.innerHTML = "<i class='fa-solid fa-triangle-exclamation'></i> Foi trazido o dado mais atual capturado pelo sensor. <br> Como não há dados novos a exibir, o gráfico não atualizará."
                        console.log("Horário do novo dado capturado:")
                        console.log(novoRegistro[0].porcentagem)
                        console.log("Horário do último dado capturado:")
                        console.log(dados.labels[dados.labels.length])
                        console.log("---------------------------------------------------------------")
                    } else {
                        // tirando e colocando valores no gráfico
                        dados.labels.shift(); // apagar o primeiro
                        dados.labels.push(novoRegistro[0].horario); // incluir um novo momento

                        dados.datasets[0].data.shift();  // apagar o primeiro de umidade
                        dados.datasets[0].data.push(novoRegistro[0].porcentagem); // incluir uma nova medida de umidade

                        // dados.datasets[1].data.shift();  // apagar o primeiro de temperatura
                        // dados.datasets[1].data.push(novoRegistro[0].temperatura); // incluir uma nova medida de temperatura

                        myChart2.update();
                    }

                    // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
                    // proximaAtualizacao = setTimeout(() => atualizarGrafico(disco, dados, myChart), 2000);
                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
                // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
                // proximaAtualizacao = setTimeout(() => atualizarGrafico(disco, dados, myChart), 2000);
            }
        })
            .catch(function
                (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });

    }

    // RAM
    function obterDadosGraficoRam(ram) {

        // if (proximaAtualizacao != undefined) {
        //     clearTimeout(proximaAtualizacao);
        // }

        fetch(`/medidas/ultimasRam/${ram}`, { cache: 'no-store' }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    resposta.reverse();

                    plotarGraficoRam(resposta, ram);
                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    // Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico
    // Configura o gráfico (cores, tipo, etc), materializa-o na página e, 
    // A função *plotarGrafico* também invoca a função *atualizarGrafico*
    function plotarGraficoRam(resposta, ram) {

        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        let labels = [];

        // Criando estrutura para plotar gráfico - dados
        let dados = {
            labels: labels,
            datasets: [{
                label: 'Uso de RAM',
                data: [],
                fill: true,
                backgroundColor: 'rgb(17,94,210)',
                borderColor: '115ED2',
                tension: 0.1
            }]
        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];
            labels.push(registro.horario);
            dados.datasets[0].data.push(registro.porcentagem);
        }

        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log(labels)
        console.log('Dados:')
        console.log(dados.datasets)
        console.log('----------------------------------------------')

        // Criando estrutura para plotar gráfico - config
        const config = {
            type: 'line',
            data: dados,
        };

        // Adicionando gráfico criado em div na tela
        let myChart3 = new Chart(
            document.getElementById(`myChartRam`),
            config
        );

        setTimeout(() => atualizarGraficoRam(ram, dados, myChart3), 2000);
    }


    // Esta função *atualizarGrafico* atualiza o gráfico que foi renderizado na página,
    // buscando a última medida inserida em tabela contendo as capturas, 

    //     Se quiser alterar a busca, ajuste as regras de negócio em src/controllers
    //     Para ajustar o "select", ajuste o comando sql em src/models
    function atualizarGraficoRam(ram, dados, myChart3) {



        fetch(`/medidas/tempo-realRam/${ram}`, { cache: 'no-store' }).then(function (response) {
            if (response.ok) {
                response.json().then(function (novoRegistro) {

                    console.log(`Dados recebidos: ${JSON.stringify(novoRegistro)}`);
                    console.log(`Dados atuais do gráfico:`);
                    console.log(dados);

                    // let avisoCaptura = document.getElementById(`avisoCaptura${disco}`)
                    // avisoCaptura.innerHTML = ""


                    if (novoRegistro[0].momento_grafico == dados.labels[dados.labels.length]) {
                        console.log("---------------------------------------------------------------")
                        console.log("Como não há dados novos para captura, o gráfico não atualizará.")
                        // avisoCaptura.innerHTML = "<i class='fa-solid fa-triangle-exclamation'></i> Foi trazido o dado mais atual capturado pelo sensor. <br> Como não há dados novos a exibir, o gráfico não atualizará."
                        console.log("Horário do novo dado capturado:")
                        console.log(novoRegistro[0].porcentagem)
                        console.log("Horário do último dado capturado:")
                        console.log(dados.labels[dados.labels.length])
                        console.log("---------------------------------------------------------------")
                    } else {
                        // tirando e colocando valores no gráfico
                        dados.labels.shift(); // apagar o primeiro
                        dados.labels.push(novoRegistro[0].horario); // incluir um novo momento

                        dados.datasets[0].data.shift();  // apagar o primeiro de umidade
                        dados.datasets[0].data.push(novoRegistro[0].porcentagem); // incluir uma nova medida de umidade

                        // dados.datasets[1].data.shift();  // apagar o primeiro de temperatura
                        // dados.datasets[1].data.push(novoRegistro[0].temperatura); // incluir uma nova medida de temperatura

                        myChart3.update();
                    }

                    // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
                    // proximaAtualizacao = setTimeout(() => atualizarGrafico(disco, dados, myChart), 2000);
                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
                // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
                // proximaAtualizacao = setTimeout(() => atualizarGrafico(disco, dados, myChart), 2000);
            }
        })
            .catch(function
                (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });

    }
    // trazer usb
    function atualizarFeedUsb() {
        fetch("/avisos/listarUsb").then(function (resposta) {
            if (resposta.ok) {
                if (resposta.status == 204) {
                    var feed = document.getElementById("feed_container");
                    var mensagem = document.createElement("span");
                    mensagem.innerHTML = "Nenhum resultado encontrado."
                    feed.appendChild(mensagem);
                    throw "Nenhum resultado encontrado!!";
                }

                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));

                    var feed = document.getElementById("dados");
                    
                    for (let i = 0; i < resposta.length; i++) {
                        var publicacao = resposta[i];
                        feed.innerHTML += `<div class="Dados">
                                <p>${publicacao.idUSB}</p> <p>${publicacao.nomeUsb}</p>  <p>Desconectado</p>  <p>${publicacao.dtHoraInsercao}</p>
                            </div>`
                            


                        // criando e manipulando elementos do HTML via JavaScript
                        // var divPublicacao = document.createElement("div");
                        // var spanID = document.createElement("span");
                        // var spanTitulo = document.createElement("span");
                        // var spanNome = document.createElement("span");
                        // var divDescricao = document.createElement("div");
                        // var divButtons = document.createElement("div");
                        // var btnEditar = document.createElement("button");
                        // var btnDeletar = document.createElement("button");


                        // spanID.innerHTML = "ID: <b>" + publicacao.idAviso + "</b>";
                        // spanTitulo.innerHTML = "Título: <b>" + publicacao.titulo + "</b>";
                        // spanNome.innerHTML = "Autor: <b>" + publicacao.nome + "</b>";
                        // divDescricao.innerHTML = "Descrição: <b>" + publicacao.descricao + "</b>";
                        // btnEditar.innerHTML = "Editar";
                        // btnDeletar.innerHTML = "Deletar";

                        // divPublicacao.className = "publicacao";
                        // spanTitulo.id = "inputNumero" + publicacao.idAviso;
                        // spanNome.className = "publicacao-nome";
                        // spanTitulo.className = "publicacao-titulo";
                        // divDescricao.className = "publicacao-descricao";

                        // divButtons.className = "div-buttons"

                        // btnEditar.className = "publicacao-btn-editar"
                        // btnEditar.id = "btnEditar" + publicacao.idAviso;
                        // btnEditar.setAttribute("onclick", `editar(${publicacao.idAviso})`);

                        // btnDeletar.className = "publicacao-btn-editar"
                        // btnDeletar.id = "btnDeletar" + publicacao.idAviso;
                        // btnDeletar.setAttribute("onclick", `deletar(${publicacao.idAviso})`);

                        // divPublicacao.appendChild(spanID);
                        // divPublicacao.appendChild(spanNome);
                        // divPublicacao.appendChild(spanTitulo);
                        // divPublicacao.appendChild(divDescricao);
                        // divPublicacao.appendChild(divButtons);
                        // divButtons.appendChild(btnEditar);
                        // divButtons.appendChild(btnDeletar);
                        // feed.appendChild(divPublicacao);
                    }

                    finalizarAguardar();
                });
            } else {
                throw ('Houve um erro na API!');
            }
        }).catch(function (resposta) {
            console.error(resposta);
            finalizarAguardar();
        });
    }





</script>