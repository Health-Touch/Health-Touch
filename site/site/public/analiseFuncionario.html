<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/baseDash.css">
    <link rel="stylesheet" href="css/analiseFuncionario.css">
    <title>Health Touch| Funcionários</title>
</head>

<body onload="atualizarTodosComputadores()">

    <div class="divPai">
        <!-- inicio menu lateral -->
        <div class="divPaiLateral">
            <div class="filhoLateral">

                <div class="divNomeEmpresa">

                    <p id="nomeEmpresa">Bem Vindo <br> Nome da Empresa</p>
                </div>

                <div class="divMainMenu">
                    <p id="pMainMenu">MAIN MENU</p>
                </div>

                <div class="divPaiOpcoesMenu">
                    <div class="divHome">
                        <img id="iconMenuLateralHome" src="assets/img/iconHome.png">
                        <div class="divEspaco"></div>
                        <a href="setores.html" id="pMenuLateral">Home</a>
                    </div>

                    <div class="divEstatisticas">
                        <img id="iconEstatiscasLateral" src="assets/img/estatisticasIcon.png">
                        <div class="divEspaco"></div>
                        <a href="dashSetor.html" id="pMenuLateral">Estatisticas</a>
                    </div>

                    <div class="divDashboards">
                        <img id="iconDashboardsLateral" src="assets/img/iconDashboard.png">
                        <div class="divEspaco"></div>
                        <a href="AnaliseDetalhada.html" id="pMenuLateral">Dashboards</a>
                    </div>

                    <div class="divComputador">
                        <img id="iconComputadorLateral" src="assets/img/iconComputador.png">
                        <div class="divEspaco"></div>
                        <a href="cadastroMaquinas.html" id="pMenuLateral">Cadastro Máquinas</a>
                    </div>

                    <div class="divCadastroComputador">
                        <img id="iconComputadorCadLateral" src="assets/img/iconPcConfig.png">
                        <div class="divEspaco"></div>
                        <a href="analiseMaquinaTI.html" id="pMenuLateral">Análise Máquinas</a>
                    </div>

                    <div class="divAnaliseEquipe">
                        <img id="iconAnaliseEquipe" src="assets/img/iconEquipe.png">
                        <div class="divEspaco"></div>
                        <a href="cadastroFuncionarios.html" id="pMenuLateral">Cadastro Equipe</a>
                    </div>

                    <div class="divCadastroEquipe">
                        <img id="iconCadastroEquipe" src="assets/img/IconEquipeConfig.png">
                        <div class="divEspaco"></div>
                        <a href="analiseFuncionario.html" id="pMenuLateral">Análise Equipe</a>
                    </div>
                </div>

                <div class="divEspacoV2"></div>

                <div class="divHelp">
                    <p id="pHelp">HELP</p>
                </div>

                <div class="divPaiHelpMenu">
                    <div class="divHelpDesk">
                        <img id="iconHelpDesk" src="assets/img/iconHelp.png">
                        <div class="divEspaco"></div>
                        <a href="SuporteHealthTooch.html" id="pMenuLateral">HelpDesk</a>
                    </div>

                    <div class="divConfiguracoes">
                        <img id="iconConfiguracoes" src="assets/img/iconConfig.png">
                        <div class="divEspaco"></div>
                        <a href="AtualizarUser.html" id="pMenuLateral">Configurações</a>
                    </div>

                    <img id="logoMenuLateral" src="assets/img/logoMenu.png">

                </div>

            </div>
        </div>
        <!-- fim do menu lateral -->

        <!-- inicio do cabeçalho -->
        <div class="divPaiCabecalho">
            <div class="filhoCabecalho">

                <div class="esquerdaCabecalho">
                    <input type="text" class="inputLogin" placeholder="Pesquisar"></input>
                    <img src="assets/img/lupa.png" class="lupaBusca">
                </div>

                <div class="direitaCabecalho">
                    <img class="emailIconCabecalho" src="assets/img/iconEmail.png">
                    <img class="sinoIconCabecalho" src="assets/img/notificacaoIcon.png">
                    <div class="divPerfilCabecalho">
                        <img class="iconPerfilCabecalho" src="assets/img/fotoPerfil.png">
                        <div class="textosIcon">
                            <p id="tituloPerfil">Anthony Bento</p>
                            <p id="cargoPerfil">CEO</p>
                        </div>
                        <img class="setaPerfilCabecalho" src="assets/img/setaIcon.png">
                    </div>
                </div>

            </div>
            <!-- fim do cabeçalho -->

            <!-- começo conteudo pagina -->
            <div class="divPaiConteudo">
                <span>Análise de Funcionários</span>
                <div class="divPaiInformacao">
                    <div class="divFilhoInformacao">
                        <ul class="divColuna">
                            <li id="idTeste">ID</li>
                            <li id="idTeste2">NOME</li>
                            <li id="idTeste3">E-Mail</li>
                            <li id="idTeste4">Status</li>
                            <li id="idTeste5">Cargo</li>
                        </ul>
                    </div>
                    <div class="divConteudo">
                        <div class="divConteudoScroll" id="divConteudoScroll">

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- fim conteudo pagina -->
    </div>
</body>

</html>
<script>
    function atualizarTodosComputadores() {
        fetch("/avisos/listarTodosFuncionarios").then(function (resposta) {

            if (resposta.ok) {
                // if (resposta.status == 204) {
                //     var feed = document.getElementById("feed_container");
                //     var mensagem = document.createElement("span");
                //     mensagem.innerHTML = "Nenhum resultado encontrado."
                //     feed.appendChild(mensagem);
                //     throw "Nenhum resultado encontrado!!";
                // }
                console.log("ENTREII")

                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));

                    for (let i = 0; i < resposta.length; i++) {

                        var TodosFuncionarios = resposta[i];

                        var Cargo = TodosFuncionarios.nivelAcesso

                        if (Cargo == "RL") {
                            Cargo = "Representante"
                        }
                        else if (Cargo == "GT") {
                            Cargo = "Gerente TI"
                        }
                        else {
                            Cargo = "Equipe TI"
                        }

                        divConteudoScroll.innerHTML += `
                        <div class="divfilhoConteudo" id="divfilhoConteudo" >
                            <li><img id="Computador" src="assets/img/fotoPerfil.png" alt="foto-perfil"></li>
                            <li id="liNumero">${TodosFuncionarios.idColaborador}</li>
                            <li id="linome">${TodosFuncionarios.nome}</li>
                            <li id="liemail">${TodosFuncionarios.email}</li>
                            <li id="liStatus" class="active">${TodosFuncionarios.statusColaborador}</li>
                            <li id="liCargo">${Cargo}</li>
                            <li id="liUpdate" style="color:aliceblue">Ativar</li>
                            <li id="liDelete" style="color:aliceblue">Desativar</li>
                        </div> 
                        `;
                    }
                    // finalizarAguardar();
                });
            } else {
                throw ('Houve um erro na API!');
            }
        }).catch(function (resposta) {
            console.error(resposta);
            // finalizarAguardar();
        });

        var nome = sessionStorage.NOME_COLABORADOR;
        tituloPerfil.innerHTML = nome;

        var cargo = sessionStorage.NIVELACESSO_COLABORADOR;
        if (cargo == "RL") {
            cargo = "Representante"
        } else if (cargo == "GT") {
            cargo = "Gerente TI"
        }

        cargoPerfil.innerHTML = cargo

        var Empresa = sessionStorage.NOME_FANTASIA_COLABORADOR;
        nomeEmpresa.innerHTML = Empresa;
    }
</script>